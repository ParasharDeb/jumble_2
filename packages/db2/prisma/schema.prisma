
generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
// --- User ---
model User {
  id        String     @id @default(uuid())
  email     String     @unique
  firstname String
  lastname  String
  password  String
  details   Details?  
  Jobs      UserJobs[]
}

// --- Details ---
model Details {
  id         Int        @id @default(autoincrement())
  resume     String
  bio        String?
  location   String?
  phone      String?
  portfolio  String
  github     String
  linkedin   String
  userId     String     @unique
  user       User       @relation( fields: [userId], references: [id])
  projects   Projects[]
  tech_stack Tech_stack[]
}

// --- Projects ---
model Projects {
  id          Int      @id @default(autoincrement())
  name        String
  github      String   @unique
  deployed    String?
  description String
  landingPage String?
  detailsId   Int
  details     Details  @relation(fields: [detailsId], references: [id])
}

// --- Tech_stack ---
model Tech_stack {
  id        Int      @id @default(autoincrement())
  name      String
  version   String
  detailsId Int
  details   Details  @relation(fields: [detailsId], references: [id])
  jobId     Int
  Jobs      Jobs     @relation(fields: [jobId], references: [id])
}

// --- HR ---
model HR {
  id        String   @id @default(uuid())
  email     String   @unique
  firstname String
  lastname  String
  password  String
  jobs      Jobs[]
}

// --- Jobs ---
model Jobs {
  id           Int           @id @default(autoincrement())
  role         String
  description  String
  location     String
  salary       Int?
  experience   String
  company      String
  company_logo String?
  HRId         String
  HR           HR            @relation(fields: [HRId], references: [id])
  skills       Tech_stack[]
  User         UserJobs[]
}

// --- UserJobs ---
model UserJobs {
  userId   String
  jobId    Int
  appliedAt DateTime @default(now())
  user     User      @relation(fields: [userId], references: [id])
  job      Jobs      @relation(fields: [jobId], references: [id])

  @@id([userId, jobId])
}
